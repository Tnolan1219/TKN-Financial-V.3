<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Rental Property Calculator </title>
  <a class="btn" href="Re_home.html">Back</a>
  <link rel="stylesheet" href="/styles/style.css" />


    <style>
/* ==========================================================
   style.css — Bright Navy UI (Cards, Forms, Tables, KPIs)
   Palette: deep navy + azure + mint
   ========================================================== */

/* -------------------- Theme tokens -------------------- */
:root{
  /* Colors */
  --bg: #0b1020;          /* page background (deep navy) */
  --panel:#0e1633;        /* headers/footers/panels */
  --card:#111732;         /* cards */
  --surface:#0f142b;      /* subtle surfaces */
  --muted:#7c8db5;        /* muted text/accent lines */
  --text:#e8ecf7;         /* body text */
  --sub:#b8c6e6;          /* secondary text */
  --accent:#6ea8ff;       /* azure primary */
  --accent-2:#9ef6d0;     /* mint secondary */
  --warn:#ffb86b;         /* amber */
  --danger:#ff6b6b;       /* coral */
  --ok:#42d392;           /* green */
  --ring: 20, 500px;      /* focus ring: blur, spread */

  /* Effects */
  --radius: 18px;
  --radius-sm: 12px;
  --shadow: 0 12px 40px rgba(0,0,0,.35);
  --glass: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  --glass-strong: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
}

/* -------------------- Base -------------------- */
*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--text);
  background:
    url('data:image/svg+xml;utf8,<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="40" height="40" fill="%230b1020"/><circle cx="20" cy="20" r="1.5" fill="%2360a5fa" opacity="0.12"/><circle cx="10" cy="10" r="1.5" fill="%2360a5fa" opacity="0.12"/><circle cx="30" cy="30" r="1.5" fill="%2360a5fa" opacity="0.12"/></svg>'),
    radial-gradient(1200px 600px at -10% -10%, rgba(96,165,250,.14), transparent 55%),
    radial-gradient(900px 420px at 110% -10%, rgba(99,102,241,.13), transparent 55%),
    linear-gradient(180deg, var(--bg), #0b1020 40%, #0a0f1a);
  min-height:100vh;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
a{ color:var(--accent); text-decoration:none; }
a:hover{ text-decoration:underline; }
h1,h2,h3{ margin:0 0 8px; letter-spacing:.2px; }
h1{ font-size: clamp(22px, 2.6vw, 32px); }
h2{ font-size: clamp(18px, 2vw, 22px); color:var(--accent); font-weight:800; }
h3{ font-size:1rem; color:#cfe1ff; }

/* -------------------- Containers & Header -------------------- */

.header {
  display: flex;
  justify-content: center;
  margin: 20px auto;
}

.header-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;

  /* Centered rounded rectangle */
  background: linear-gradient(180deg, rgba(22,27,34,0.95), rgba(17,24,39,0.85));
  backdrop-filter: blur(12px);
  border-radius: 16px;
  padding: 16px 28px;
  box-shadow: 0 6px 24px rgba(0,0,0,.35);

  /* Limit width so it doesn’t span full screen */
  max-width: 900px;
  width: 90%;
}

.app-title {
  font-size: 1.6rem;
  font-weight: 800;
  color: var(--accent);
  margin: 0;
}

.tags {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.tag {
  font-size: .8rem;
  color: var(--sub);
  background: rgba(255,255,255,.06);
  padding: 3px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.1);
}

.status-indicator {
  font-size: .9rem;
  font-weight: 600;
  color: #10b981;
}
.status-indicator::before {
  content: "● ";
  color: #10b981;
}

/* -------------------- Toolbar & Buttons -------------------- */
.toolbar{ display:flex; gap:10px; flex-wrap:wrap; }
.btn{
  appearance:none; border:1px solid rgba(255,255,255,.10); color:var(--text);
  background: linear-gradient(180deg, #192248, #121833);
  padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer; transition:.2s ease;
  box-shadow: 0 6px 20px rgba(10,15,40,.25);
}
.btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18); }
.btn.primary{ background: linear-gradient(90deg, var(--accent), var(--accent-2)); color:#041027; border-color:transparent; }
.btn.secondary{ background: linear-gradient(180deg, #152035, #0f1528); color:#cfe1ff; }
.btn.ghost{ background: transparent; border-color: rgba(255,255,255,.15); color:#cfe1ff; }
.btn.warn{ background: linear-gradient(180deg, #3a230e, #2b1a0a); border-color:#5b3a19; color:#ffd8a8; }
.btn.danger{ background: linear-gradient(180deg, #3a0f15, #2a0b0f); border-color:#6b1f2a; color:#ffe5ea; }
.btn.success{ background: linear-gradient(180deg, #0f2e25, #0b241c); border-color:#1f6e56; color:#c9ffe9; }

/* -------------------- Tabs -------------------- */
.tabs{ display:flex; gap:8px; flex-wrap:wrap; }
.tab{
  padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700; color:#cbd8ff;
  border:1px solid rgba(255,255,255,.10);
  background:linear-gradient(180deg,#121a36,#0e142b);
  transition:.18s ease;
}
.tab:hover{ border-color: rgba(255,255,255,.18); transform: translateY(-1px); }
.tab.active{
  background: linear-gradient(180deg, #1b2750, #10183a);
  color:#fff; border-color:#2e3b74; box-shadow: 0 8px 24px rgba(46,59,116,.25);
}

/* -------------------- Layout -------------------- */
.grid {
  display: grid;
  gap: 24px;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  margin: 10;         /* remove extra margins */
}

/* -------------------- Cards -------------------- */
.card{
  background: var(--glass, var(--glass));
  border:1px solid #1f2a41;
  border-radius:var(--radius);
  box-shadow:0 8px 32px rgba(30,40,70,.18), var(--shadow);
  padding:24px 18px 18px 18px;
  display:flex; flex-direction:column; justify-content:space-between;
  min-height:220px;
  backdrop-filter: blur(14px);
  transition: transform .18s cubic-bezier(.4,2,.3,1), box-shadow .18s, border .18s, background .18s;
}
.card:hover{
  transform: translateY(-2px) scale(1.01);
  box-shadow: 0 16px 48px rgba(60,100,200,.18), var(--shadow);
  border-color: var(--accent);
  background: linear-gradient(120deg, rgba(96,165,250,.08) 0%, var(--card) 100%);
}
.card h2{ margin:0 0 10px; font-size:1.18rem; color:var(--accent); font-weight:800; letter-spacing:.1px; }

/* -------------------- Form Elements -------------------- */
.row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
.row-3{ display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; }
.row-4{ display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; }
@media (max-width: 720px){ .row, .row-3, .row-4{ grid-template-columns: 1fr; } }

label{ font-size:.9rem; color:#c6d3ff; display:block; margin-bottom:6px; font-weight:600; }
input[type="text"], input[type="number"], input[type="email"], input[type="password"], select, textarea{
  width:100%; background:#0b1228; color:#eaf1ff; border:1px solid #1d2a53; border-radius:12px;
  padding:12px 12px; outline:none; transition:border .2s, box-shadow .2s, background .2s;
}
input::placeholder, textarea::placeholder{ color:#7f90be; }
input:focus, select:focus, textarea:focus{
  border-color:#3c57a5; box-shadow: 0 0 0 4px rgba(62,108,255,.12);
  background:#0c1530;
}

/* Switch */
.switch{ display:inline-flex; align-items:center; gap:8px; }
.switch input{
  appearance:none; width:46px; height:26px; background:#1a254a; border-radius:20px; position:relative; outline:none; cursor:pointer; transition:.2s; border:1px solid rgba(255,255,255,.12);
}
.switch input:checked{ background:#2442a9; }
.switch input:before{
  content:""; position:absolute; top:3px; left:3px; width:20px; height:20px; background:#fff; border-radius:50%; transition:.2s;
}
.switch input:checked:before{ transform: translateX(20px); }

/* Pills & Small Text */
.pill{ display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); }
.hint{ font-size:.82rem; color:#a6b5e8; }
.small{ font-size:.78rem; }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

/* -------------------- Tables -------------------- */
.table{ width:100%; border-collapse: collapse; }
.table th, .table td{ padding:10px 10px; border-bottom: 1px dashed rgba(255,255,255,.08); }
.table th{ text-align:left; color:#9eb2ff; font-weight:700; font-size:.88rem; }
.table td input{ width:100%; padding:8px 10px; }

/* Row hover card effect */
.table tbody tr{
  transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease;
}
.table tbody tr:hover{
  transform: translateY(-1px);
  box-shadow: 0 8px 22px rgba(24,58,140,.22);
}

/* Delete / Danger button inline */
.table .del{
  background:#2a1030; border:1px solid #603b79; color:#f7ceff; padding:6px 10px; border-radius:10px; cursor:pointer; font-weight:700;
}

/* -------------------- KPIs -------------------- */
.kpis{ display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; margin-top:10px; }
.kpi{
  background: var(--glass);
  border:1px solid rgba(255,255,255,.10);
  border-radius:16px; padding:14px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.kpi .label{ color:#4668e4; font-size:.8rem; font-weight:600; }
.kpi .value{ font-weight:800; font-size:1.3rem; margin-top:4px; letter-spacing:.3px; }
@media (max-width: 980px){ .kpis{ grid-template-columns: repeat(2, 1fr); } }

/* -------------------- Sections & Separators -------------------- */

/* -------------------- Messages / Alerts -------------------- */
.alert{
  padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background: var(--glass-strong);
}
.alert.info{ border-color:#325c9e; background:linear-gradient(180deg, rgba(96,165,250,.15), rgba(255,255,255,.02)); color:#d9e7ff; }
.alert.warn{ border-color:#5b3a19; background:linear-gradient(180deg, rgba(255,184,107,.15), rgba(255,255,255,.02)); color:#ffe9c9; }
.alert.danger{ border-color:#7d2a39; background:linear-gradient(180deg, rgba(255,107,107,.16), rgba(255,255,255,.02)); color:#ffd7de; }
.alert.ok{ border-color:#2f8e6c; background:linear-gradient(180deg, rgba(66,211,146,.16), rgba(255,255,255,.02)); color:#d6ffef; }

/* -------------------- Toast -------------------- */
.toast{
  position:fixed; right:16px; bottom:16px; z-index:1000;
  background: linear-gradient(180deg, #152035, #0f1528); color:#eaf1ff;
  border:1px solid rgba(255,255,255,.12); border-radius:12px;
  padding:10px 12px; box-shadow: 0 12px 40px rgba(0,0,0,.35);
}

/* -------------------- Modal (basic shell) -------------------- */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(4,8,18,.6); backdrop-filter: blur(6px);
  display:none; align-items:center; justify-content:center; z-index:998;
}
.modal{ background:var(--card); border:1px solid rgba(255,255,255,.14); border-radius:18px; padding:18px; width:min(680px, 92vw); box-shadow: var(--shadow); }
.modal-backdrop.show{ display:flex; }

/* -------------------- Footer -------------------- */
.footer{ margin:24px 0 6px; color:#9fb1df; font-size:.82rem; }
.link{ color:#a9d4ff; text-decoration:none; border-bottom:1px dotted rgba(169,212,255,.4); }

/* -------------------- Drag/Drop helpers (budget, etc.) -------------------- */
.budget-dragging { opacity: .5; }
.budget-drop-target { outline: 2px dashed var(--accent); background: rgba(110,168,255,0.08); }

/* -------------------- Sticky Actions -------------------- */
.sticky-actions{
  position:sticky; bottom:0; margin-top:12px;
  background: linear-gradient(0deg, rgba(14,22,51,.96), rgba(14,22,51,.6));
  padding:10px; border-top:1px solid rgba(255,255,255,.10);
  display:flex; gap:8px; flex-wrap:wrap; z-index:5;
  backdrop-filter:saturate(140%) blur(6px);
}

/* -------------------- Accessibility -------------------- */
.sr-only{
  position:absolute !important; width:1px; height:1px; overflow:hidden;
  clip:rect(1px,1px,1px,1px); white-space:nowrap; border:0; padding:0; margin:-1px;
}
:focus-visible{
  outline:3px solid rgba(110,168,255,.65);
  outline-offset:2px;
  border-radius:10px;
}

/* -------------------- Utilities -------------------- */
.text-center{ text-align:center; }
.text-right{ text-align:right; }
.center{ display:flex; align-items:center; justify-content:center; }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.grid-3{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
.grid-4{ display:grid; grid-template-columns:repeat(4,1fr); gap:12px; }
@media (max-width: 980px){
  .grid-2,.grid-3,.grid-4{ grid-template-columns:1fr; }
}
/* Spacing */
.mt-0{ margin-top:0; } .mt-8{ margin-top:8px; } .mt-12{ margin-top:12px; } .mt-16{ margin-top:16px; } .mt-24{ margin-top:24px; }
.mb-0{ margin-bottom:0; } .mb-8{ margin-bottom:8px; } .mb-12{ margin-bottom:12px; } .mb-16{ margin-bottom:16px; } .mb-24{ margin-bottom:24px; }
.pt-12{ padding-top:12px; } .pb-12{ padding-bottom:12px; }

/* -------------------- Table-like finance rows (optional) -------------------- */
.finance-table{ width:100%; border-collapse:separate; border-spacing:0 6px; }
.finance-table thead th{
  text-align:left; color:#9eb2ff; font-weight:700; font-size:.88rem;
  padding:6px 8px; border-bottom:1px solid rgba(255,255,255,.10);
}
.finance-table tbody tr{
  background: var(--glass);
  border:1px solid rgba(255,255,255,.10);
  border-radius:12px;
}
.finance-table tbody td{
  padding:10px 8px; font-variant-numeric: tabular-nums;
}
.finance-table tbody tr td:first-child{ border-radius:12px 0 0 12px; }
.finance-table tbody tr td:last-child{ border-radius:0 12px 12px 0; text-align:right; }
.finance-table .section{ color:#bcd2ff; text-transform:uppercase; font-size:.8rem; padding-top:12px; letter-spacing:.4px; }
.finance-table .tot{ font-weight:800; color:#e9f2ff; }

/* ---- Danger Button (red) ---- */
.btn-danger,
.btn.danger{
  appearance:none;
  color:#fff;
  background: linear-gradient(180deg, #ff6b6b, #e64747); /* uses red ramp */
  border:1px solid rgba(230,71,71,.9);
  border-radius:12px;
  padding:10px 14px;
  font-weight:700;
  cursor:pointer;
  box-shadow: 0 6px 20px rgba(230,71,71,.28);
  transition: transform .06s ease, background .18s ease, border .18s ease, box-shadow .18s ease;
}
.btn-danger:hover,
.btn.danger:hover{
  background: linear-gradient(180deg, #ff7d7d, #f05252);
  border-color:#ff7a7a;
  transform: translateY(-1px);
  box-shadow: 0 12px 36px rgba(230,71,71,.24);
}
.btn-danger:active,
.btn.danger:active{
  transform: translateY(0);
}
.btn-danger:focus-visible,
.btn.danger:focus-visible{
  outline:3px solid rgba(255,107,107,.55);
  outline-offset:2px;
  border-radius:12px;
}

/* Disabled state (optional) */
.btn-danger[disabled],
.btn.danger[disabled]{
  opacity:.6; cursor:not-allowed; box-shadow:none;
}

/* ===== Header Shell ===== */

/* ===== Container (shared) ===== */
.container{
  max-width: 1300px;
  margin: 0 auto;
  padding: 0 24px;
}

/* ===== Header Inner ===== */

/* ===== Title Block ===== */
.title{
  display: flex;
  align-items: center;
  gap: 10px;
}
.title h1{
  margin: 0;
  font-size: clamp(20px, 2.2vw, 28px);
  color: var(--text);
  letter-spacing: .2px;
  font-weight: 800;
}
.title .logo{
  width: 38px; height: 38px; border-radius: 12px;
  background: linear-gradient(130deg, var(--accent), #a37bff);
  box-shadow: 0 10px 24px rgba(110,168,255,.25), inset 0 0 24px rgba(255,255,255,.22);
}

/* ===== Responsive ===== */
@media (max-width: 720px){
  .header-inner{ min-height: 56px; }
  .title h1{ font-size: 20px; }
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .55rem .9rem;              /* smaller padding */
  border-radius: 999px;
  background: var(--accent-gradient, linear-gradient(90deg,#60a5fa 0%,#818cf8 100%));
  color: #0a0a0a;
  font-weight: 700;                   /* slightly lighter than 900 */
  font-size: .95em;                   /* smaller text */
  border: 0;
  cursor: pointer;
  box-shadow: 0 3px 12px rgba(96,165,250,.22); /* lighter shadow */
  transition: background .18s, box-shadow .18s, color .18s, transform .15s;
}

.btn:hover {
  background: linear-gradient(90deg,#818cf8 0%,#60a5fa 100%);
  color: #fff;
  box-shadow: 0 6px 20px rgba(96,165,250,.18);
  transform: translateY(-1px);        /* subtle lift */
}

.btn:active {
  transform: translateY(0);           /* press effect */
}

.btn.primary {
  background: var(--accent-gradient);
  color: #0a0a0a;
}

.btn.primary:hover {
  background: linear-gradient(90deg,#818cf8 0%,#60a5fa 100%);
  color: #fff;
}

.btn.secondary {
  background: rgba(27, 47, 74, 0.92);
  font-size: .9em;
  padding: .5rem .85rem;
  color: var(--text);
  border: 1px solid #2f3b4e;
  box-shadow: none;
}

.btn.secondary:hover {
  background: var(--accent);
  color: #0a0a0a;
  border-color: var(--accent);
}

.results h2 {
  font-size: 1.6rem;
  font-weight: 800;
  margin-bottom: 1rem;
  color: var(--accent);
  text-align: center;
}

.kpis {
  display: grid;
  gap: 16px;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  margin-bottom: 24px;
}

.kpis.two-col {
  grid-template-columns: 1fr 1fr;
}

.kpi {
  background: var(--muted);
  border-radius: var(--radius);
  padding: 16px;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0,0,0,.25);
}

.kpi .label {
  font-size: .85rem;
  color: var(--sub);
  margin-bottom: 6px;
}

.kpi .value {
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--text);
}

.group {
  margin-top: 32px;
}

.group h3 {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 12px;
  color: var(--accent);
}

.table-scroll {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: .95rem;
}

thead th {
  text-align: left;
  padding: 10px;
  background: var(--panel);
  color: var(--sub);
  font-weight: 600;
}

tbody td {
  padding: 10px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}

tbody tr:nth-child(even) {
  background: rgba(255,255,255,.03);
}

.help {
  font-size: .8rem;
  color: var(--sub);
  margin-top: 8px;
  text-align: center;
}
  </style>  

  <meta name="viewport" content="width=device-width, initial-scale=1" />
 
</head>
<body>
<header class="header">
  <div class="header-inner container">
    <!-- Left: Title + Tags -->
    <div class="title-block">
      <h1 class="app-title">📈 Buy & Hold Calculator</h1>
      <div class="tags">
        <span class="tag">Growth Projections</span>
        <span class="tag">Custom Lines</span>
      </div>
    </div>

    <!-- Right: Status -->
    <div class="status-block">
      <span id="statusBar" class="status-indicator">● Ready</span>
    </div>
  </div>
</header>


<main class="container">
  <div class="flow-vertical">
    <!-- Inputs: full width, sticky optional -->
    <section class="card sticky-top" aria-labelledby="inputsTitle">
      <h2 id="inputsTitle">Inputs</h2>

      <div class="group">
        <h3>Purchase & Loan</h3>
        <div class="row">
          <div>
            <label for="purchasePrice">Purchase price</label>
            <input id="purchasePrice" type="number" placeholder="300000" />
          </div>
          <div>
            <label for="downPaymentPct">Down payment %</label>
            <input id="downPaymentPct" type="number" placeholder="20" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="interestRatePct">Interest rate % (annual)</label>
            <input id="interestRatePct" type="number" placeholder="6.5" />
          </div>
          <div>
            <label for="loanTermYears">Loan term (years)</label>
            <input id="loanTermYears" type="number" placeholder="30" />
          </div>
        </div>
      </div>

      <div class="group">
        <h3>Income (Base)</h3>
        <div class="row">
          <div>
            <label for="monthlyRent">Monthly rent</label>
            <input id="monthlyRent" type="number" placeholder="2400" />
          </div>
          <div>
            <label for="otherIncomeMo">Other income (monthly)</label>
            <input id="otherIncomeMo" type="number" placeholder="0" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="vacancyPct">Vacancy %</label>
            <input id="vacancyPct" type="number" placeholder="5" />
            <div class="help">Percent of gross lost to vacancy (kept constant over the hold).</div>
          </div>
          <div>
            <label for="managementPct">Management % of rent</label>
            <input id="managementPct" type="number" placeholder="8" />
            <div class="help">Applied to rent each year; grows implicitly with rent.</div>
          </div>
        </div>
      </div>

      <div class="group">
        <h3>Expenses (Base)</h3>
        <div class="row">
          <div>
            <label for="annualTaxes">Property taxes (annual)</label>
            <input id="annualTaxes" type="number" placeholder="3600" />
          </div>
          <div>
            <label for="annualInsurance">Insurance (annual)</label>
            <input id="annualInsurance" type="number" placeholder="1200" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="maintenanceMonthly">Maintenance (monthly)</label>
            <input id="maintenanceMonthly" type="number" placeholder="150" />
          </div>
          <div>
            <label for="hoaMonthly">HOA (monthly)</label>
            <input id="hoaMonthly" type="number" placeholder="0" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="utilitiesMonthly">Utilities (monthly)</label>
            <input id="utilitiesMonthly" type="number" placeholder="0" />
          </div>
          <div>
            <label for="otherExpensesMonthly">Other expenses (monthly)</label>
            <input id="otherExpensesMonthly" type="number" placeholder="0" />
          </div>
        </div>
      </div>

      <div class="group">
        <h3>One-time Costs</h3>
        <div class="row">
          <div>
            <label for="closingCosts">Closing costs</label>
            <input id="closingCosts" type="number" placeholder="6000" />
          </div>
          <div>
            <label for="renovationCosts">Renovation costs</label>
            <input id="renovationCosts" type="number" placeholder="0" />
          </div>
        </div>
      </div>

      <div class="group">
        <h3>Growth Rates & Hold</h3>
        <div class="row">
          <div>
            <label for="holdYears">Hold period (years)</label>
            <input id="holdYears" type="number" placeholder="10" />
          </div>
          <div>
            <label for="appreciationPct">Property appreciation % (annual)</label>
            <input id="appreciationPct" type="number" placeholder="3" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="rentGrowthPct">Rent growth % (annual)</label>
            <input id="rentGrowthPct" type="number" placeholder="3" />
          </div>
          <div>
            <label for="otherIncomeGrowthPct">Other income growth % (annual)</label>
            <input id="otherIncomeGrowthPct" type="number" placeholder="0" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="taxesGrowthPct">Taxes growth % (annual)</label>
            <input id="taxesGrowthPct" type="number" placeholder="2.5" />
          </div>
          <div>
            <label for="insuranceGrowthPct">Insurance growth % (annual)</label>
            <input id="insuranceGrowthPct" type="number" placeholder="4" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="maintenanceGrowthPct">Maintenance growth % (annual)</label>
            <input id="maintenanceGrowthPct" type="number" placeholder="2" />
          </div>
          <div>
            <label for="hoaGrowthPct">HOA growth % (annual)</label>
            <input id="hoaGrowthPct" type="number" placeholder="2" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="utilitiesGrowthPct">Utilities growth % (annual)</label>
            <input id="utilitiesGrowthPct" type="number" placeholder="2" />
          </div>
          <div>
            <label for="otherExpensesGrowthPct">Other expenses growth % (annual)</label>
            <input id="otherExpensesGrowthPct" type="number" placeholder="2" />
          </div>
        </div>
      </div>

      <div class="group">
        <h3>Custom Income & Expenses</h3>

        <div class="toolbar"><!-- your add income button lives here if present in your JS --></div>
        <div id="incomeItems"></div>

        <div class="toolbar" style="margin-top:12px"><!-- your add expense button --></div>
        <div id="expenseItems"></div>
      </div>

<div class="actions">
  <button id="calcBtn" class="btn">Calculate</button>
  <div class="inline">
    <button id="saveProjectionBtn" class="btn">Save projection</button>
    <select id="loadProjectionSelect" aria-label="Load saved projection">
      <option value="">Load projection…</option>
    </select>
    <button id="deleteProjectionBtn" class="btn-danger">Delete</button>
  </div>
  <span class="grow"></span>
  <a href="Re_home.html" class="btn">Back</a>
</div>

    </section>

    <!-- Results: full width below -->
    <section class="card" aria-labelledby="resultsTitle">
      <h2 id="resultsTitle">Results</h2>

      <div class="sr-only" aria-live="polite" id="kpiAriaLive"></div>
      <div class="kpis" role="group" aria-label="Key performance indicators">
        <div class="kpi"><div class="label">Monthly Cash Flow</div><div id="resCashFlowMo" class="value">$0.00</div></div>
        <div class="kpi"><div class="label">Annual Cash Flow</div><div id="resCashFlowYr" class="value">$0.00</div></div>
        <div class="kpi"><div class="label">Cash-on-Cash</div><div id="resCoC" class="value">—</div></div>
      </div>

      <div class="group mt-12">
        <h3>Finance table (current year)</h3>
        <table id="financeTable" aria-describedby="resultsTitle">
          <thead><tr><th>Line item</th><th>Amount</th></tr></thead>
          <tbody id="financeTableBody"></tbody>
        </table>
      </div>

      <div class="group mt-12">
        <h3>Multi-Year Projection</h3>
        <div class="table-scroll">
          <table id="projectionTable" aria-label="Projection table">
            <thead id="projectionTableHead"></thead>
            <tbody id="projectionTableBody"></tbody>
          </table>
        </div>
      </div>

      <div class="group mt-12">
        <h3>Long-term</h3>
        <div class="row">
          <div class="kpi"><div class="label">Future value</div><div id="resFutureValue" class="value">$0.00</div></div>
          <div class="kpi"><div class="label">Simple total return</div><div id="resTotalReturnPct" class="value">—</div></div>
        </div>
        <div class="help" style="margin-top:8px">Estimates only. Principal paydown not included in total return.</div>
      </div>

      <div class="sticky-actions">
        <button id="calcBtn2" class="btn">Calculate</button>
        <button id="saveProjectionBtn2" class="btn">Save projection</button>
      </div>
    </section>
  </div>
</main>


  <script>
    // ---------- Utilities ----------
    const $ = (id)=>document.getElementById(id);
    const toNum = (v, fb=0)=>{ if(v===null||v===undefined) return fb; const n=Number(String(v).trim()); return Number.isFinite(n)?n:fb; };
    const fmtCur = (n)=> new Intl.NumberFormat(undefined,{style:'currency',currency:'USD',maximumFractionDigits:2}).format(n||0);
    const fmtPct = (n)=> Number.isFinite(n) ? `${n.toFixed(1)}%` : '—';
    const debounce = (fn,ms=600)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };

    // ---------- Storage Keys ----------
    const LS_INPUTS_KEY = 'buyhold_sf_v3_inputs';
    const LS_PROJ_KEY   = 'buyhold_sf_v3_projections';
    const LS_INCOME_KEY = 'buyhold_sf_v3_incomeItems';
    const LS_EXPENSE_KEY= 'buyhold_sf_v3_expenseItems';

    // ---------- Defaults ----------
    const defaults = {
      purchasePrice:300000, downPaymentPct:20, interestRatePct:6.5, loanTermYears:30,
      monthlyRent:2400, otherIncomeMo:0, vacancyPct:5, managementPct:8,
      annualTaxes:3600, annualInsurance:1200, maintenanceMonthly:150,
      hoaMonthly:0, utilitiesMonthly:0, otherExpensesMonthly:0,
      closingCosts:6000, renovationCosts:0,
      holdYears:10, appreciationPct:3,
      rentGrowthPct:3, otherIncomeGrowthPct:0, taxesGrowthPct:2.5, insuranceGrowthPct:4,
      maintenanceGrowthPct:2, hoaGrowthPct:2, utilitiesGrowthPct:2, otherExpensesGrowthPct:2
    };

    const inputIds = [
      'purchasePrice','downPaymentPct','interestRatePct','loanTermYears',
      'monthlyRent','otherIncomeMo','vacancyPct','managementPct',
      'annualTaxes','annualInsurance','maintenanceMonthly','hoaMonthly','utilitiesMonthly','otherExpensesMonthly',
      'closingCosts','renovationCosts','holdYears','appreciationPct',
      'rentGrowthPct','otherIncomeGrowthPct','taxesGrowthPct','insuranceGrowthPct','maintenanceGrowthPct','hoaGrowthPct','utilitiesGrowthPct','otherExpensesGrowthPct'
    ];

    const inputs = Object.fromEntries(inputIds.map(id=>[id,$(id)]));

    // ---------- Dynamic Custom Lines UI ----------
    function makeLineRow(container, list, idx, onChange){
      const item = list[idx];
      const wrap = document.createElement('div');
      wrap.className = 'list-grid';

      const lab = document.createElement('input'); lab.type='text'; lab.placeholder='Label'; lab.value=item.label||'';
      const amt = document.createElement('input'); amt.type='number'; amt.placeholder='0'; amt.value=(item.amount??'');
      const per = document.createElement('select'); per.innerHTML='<option value="monthly">Monthly</option><option value="annual">Annual</option>'; per.value=item.period||'monthly';
      const grw = document.createElement('input'); grw.type='number'; grw.placeholder='0'; grw.value=(item.growthPct??0);
      const del = document.createElement('button'); del.className='xbtn'; del.textContent='Remove';

      lab.addEventListener('input',()=>{ item.label = lab.value; onChange(); });
      amt.addEventListener('input',()=>{ item.amount = toNum(amt.value,0); onChange(); });
      per.addEventListener('change',()=>{ item.period = per.value; onChange(); });
      grw.addEventListener('input',()=>{ item.growthPct = toNum(grw.value,0); onChange(); });
      del.addEventListener('click',()=>{ const i=list.indexOf(item); if(i>-1){ list.splice(i,1); onChange(true); renderLines(); }});

      wrap.append(lab, amt, per, grw, del);
      container.appendChild(wrap);
    }

    let incomeItems = [];
    let expenseItems = [];

    function saveLines(){
      try{ localStorage.setItem(LS_INCOME_KEY, JSON.stringify(incomeItems)); }catch{}
      try{ localStorage.setItem(LS_EXPENSE_KEY, JSON.stringify(expenseItems)); }catch{}
    }

    function loadLines(){
      try{ incomeItems = JSON.parse(localStorage.getItem(LS_INCOME_KEY)||'[]'); if(!Array.isArray(incomeItems)) incomeItems=[]; }catch{ incomeItems=[]; }
      try{ expenseItems = JSON.parse(localStorage.getItem(LS_EXPENSE_KEY)||'[]'); if(!Array.isArray(expenseItems)) expenseItems=[]; }catch{ expenseItems=[]; }
    }

    function renderLines(){
      const incWrap = $('incomeItems'); incWrap.innerHTML='';
      const expWrap = $('expenseItems'); expWrap.innerHTML='';
      incomeItems.forEach((_,i)=>makeLineRow(incWrap, incomeItems, i, (removed)=>{ saveLines(); if(!removed) autosaveInputs(); }));
      expenseItems.forEach((_,i)=>makeLineRow(expWrap, expenseItems, i, (removed)=>{ saveLines(); if(!removed) autosaveInputs(); }));
    }

    // ---------- Autosave Base Inputs ----------
    function getInputsSnapshot(){
      const obj={};
      for(const id of inputIds){ const val = inputs[id].value; obj[id] = (val===''||val===null)? null : Number(val); }
      return obj;
    }

    function applyInputs(values){
      for(const id of inputIds){ const v = values?.[id]; if(v===null||v===undefined||Number.isNaN(v)){} else { inputs[id].value=v; } }
    }

    function loadLastInputs(){
      try{ const raw=localStorage.getItem(LS_INPUTS_KEY); if(!raw) return false; const data=JSON.parse(raw); applyInputs(data); return true; }catch{ return false; }
    }

    const autosaveInputs = debounce(()=>{ try{ localStorage.setItem(LS_INPUTS_KEY, JSON.stringify(getInputsSnapshot())); setStatus('Inputs autosaved'); }catch{ setStatus('Autosave failed', true);} }, 600);

    function attachInputAutosave(){ for(const id of inputIds){ inputs[id].addEventListener('input', autosaveInputs); } }

    // ---------- Core Compute ----------
    function compute(){
      // collect inputs with defaults
      const v = Object.fromEntries(inputIds.map(id=>[id, toNum(inputs[id].value || inputs[id].placeholder || defaults[id], defaults[id]) ]));

      // Down / Loan
      const down = v.purchasePrice * (v.downPaymentPct/100);
      const loan = Math.max(0, v.purchasePrice - down);

      // Mortgage P&I
      const n = Math.max(1, Math.round(v.loanTermYears*12));
      const r = (v.interestRatePct/100)/12;
      const pmt = r<=0 ? (loan/n) : loan * (r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1);

      // Base income (month 1)
      const baseRentMo = Math.max(0, v.monthlyRent);
      const baseOtherIncMo = Math.max(0, v.otherIncomeMo);
      const vacPct = v.vacancyPct/100;
      const mgmtPct = v.managementPct/100;

      // Base expenses (month 1)
      const baseTaxYr = Math.max(0, v.annualTaxes);
      const baseInsYr = Math.max(0, v.annualInsurance);
      const baseMaintMo = Math.max(0, v.maintenanceMonthly);
      const baseHoaMo = Math.max(0, v.hoaMonthly);
      const baseUtilMo = Math.max(0, v.utilitiesMonthly);
      const baseOtherExpMo = Math.max(0, v.otherExpensesMonthly);

      // Custom lines arrays snapshot (Year 1 bases)
      const incLines = incomeItems.map(it=>({label:it.label||'Income', amount:toNum(it.amount,0), period:it.period||'monthly', growthPct:toNum(it.growthPct,0)}));
      const expLines = expenseItems.map(it=>({label:it.label||'Expense', amount:toNum(it.amount,0), period:it.period||'monthly', growthPct:toNum(it.growthPct,0)}));

      // Year 1 current monthly totals
      const customIncMo = incLines.reduce((s,it)=> s + (it.period==='annual' ? it.amount/12 : it.amount), 0);
      const customExpMo = expLines.reduce((s,it)=> s + (it.period==='annual' ? it.amount/12 : it.amount), 0);

      const grossMo = Math.max(0, baseRentMo + baseOtherIncMo + customIncMo);
      const vacMo   = grossMo * vacPct;
      const egiMo   = Math.max(0, grossMo - vacMo);

      const mgmtMo  = baseRentMo * mgmtPct; // tied to rent only
      const taxMo   = baseTaxYr/12;
      const insMo   = baseInsYr/12;

      const opExMo  = mgmtMo + baseMaintMo + taxMo + insMo + baseHoaMo + baseUtilMo + baseOtherExpMo + customExpMo;
      const noiMo   = egiMo - opExMo;
      const cfMo    = noiMo - pmt;
      const cfYr    = cfMo*12;

      const initialCash = down + v.closingCosts + v.renovationCosts;
      const coc = initialCash>0 ? (cfYr/initialCash)*100 : null;

      // Long-term (property value only)
      const fv = v.purchasePrice * Math.pow(1 + (v.appreciationPct/100), Math.max(0, v.holdYears||0));
      const totalReturnPct = initialCash>0 ? (((fv - v.purchasePrice) + (cfYr * v.holdYears)) / initialCash) * 100 : null;

      return { v, down, loan, pmt,
        // current-year (Y1) snapshot (monthly)
        grossMo, vacMo, egiMo, mgmtMo, taxMo, insMo, opExMo, noiMo, cfMo, cfYr,
        customIncMo, customExpMo,
        // components
        baseRentMo, baseOtherIncMo, baseMaintMo, baseHoaMo, baseUtilMo, baseOtherExpMo,
        initialCash, coc, fv, totalReturnPct,
        incLines, expLines
      };
    }

    // ---------- Projection Builder ----------
    function buildProjection(res){
      const v = res.v;
      const years = Math.max(1, v.holdYears||1);
      const rg = v.rentGrowthPct/100;
      const og = v.otherIncomeGrowthPct/100;
      const tg = v.taxesGrowthPct/100;
      const ig = v.insuranceGrowthPct/100;
      const mg = v.maintenanceGrowthPct/100;
      const hg = v.hoaGrowthPct/100;
      const ug = v.utilitiesGrowthPct/100;
      const og2= v.otherExpensesGrowthPct/100;
      const vacPct = v.vacancyPct/100;
      const mgmtPct= v.managementPct/100;

      function grow(base, g, yIndex){ return base * Math.pow(1+g, yIndex); } // yIndex: 0-based (Year1 -> 0)

      const rows = [];
      for(let y=0;y<years;y++){
        const rentMo = grow(res.baseRentMo, rg, y);
        const otherMo= grow(res.baseOtherIncMo, og, y);
        // Custom income (each line own growth)
        let customIncMo = 0; res.incLines.forEach(it=>{ const base = (it.period==='annual'? it.amount/12 : it.amount); customIncMo += grow(base, (it.growthPct||0)/100, y); });
        const grossMo = Math.max(0, rentMo + otherMo + customIncMo);
        const vacMo = grossMo * vacPct;
        const egiMo = Math.max(0, grossMo - vacMo);

        // Expenses (mgmt tied to rent level each year)
        const mgmtMo = rentMo * mgmtPct;
        const taxMo  = grow(res.taxMo*12, tg, y)/12;   // store as annual->monthly growth for clarity
        const insMo  = grow(res.insMo*12, ig, y)/12;
        const maintMo= grow(res.baseMaintMo, mg, y);
        const hoaMo  = grow(res.baseHoaMo, hg, y);
        const utilMo = grow(res.baseUtilMo, ug, y);
        const otherExpMo = grow(res.baseOtherExpMo, og2, y);
        let customExpMo = 0; res.expLines.forEach(it=>{ const base = (it.period==='annual'? it.amount/12 : it.amount); customExpMo += grow(base, (it.growthPct||0)/100, y); });

        const opExMo = mgmtMo + maintMo + taxMo + insMo + hoaMo + utilMo + otherExpMo + customExpMo;
        const noiMo  = egiMo - opExMo;
        const cfMo   = noiMo - res.pmt;

        rows.push({
          year: y+1,
          grossYr: grossMo*12,
          vacYr:   vacMo*12,
          egiYr:   egiMo*12,
          opExYr:  opExMo*12,
          noiYr:   noiMo*12,
          debtYr:  res.pmt*12,
          cfYr:    cfMo*12,
          value:   v.purchasePrice * Math.pow(1+(v.appreciationPct/100), y+1)
        });
      }
      return rows;
    }

    // ---------- Rendering ----------
    function render(results){
      if(!results) return;
      $('resCashFlowMo').textContent = fmtCur(results.cfMo);
      $('resCashFlowYr').textContent = fmtCur(results.cfYr);
      $('resCoC').textContent = results.coc==null ? '—' : fmtPct(results.coc);
      $('kpiAriaLive').textContent = `Monthly Cash Flow ${fmtCur(results.cfMo)}, Annual Cash Flow ${fmtCur(results.cfYr)}, Cash-on-Cash ${results.coc==null?'not available':fmtPct(results.coc)}`;

      const rows=[]; const push=(label,val,opts={})=>{ rows.push(`<tr><td>${opts.section?`<span class=section>${label}</span>`:label}</td><td class="${opts.total?'tot':''}">${val}</td></tr>`); };

      // Income
      push('Income','',{section:true});
      push('Gross Scheduled Rent', fmtCur(results.baseRentMo));
      push('Other Income', fmtCur(results.baseOtherIncMo));
      if(results.customIncMo>0) push('Custom Income (Monthly total)', fmtCur(results.customIncMo));
      push('Vacancy Loss', `(${fmtCur(results.vacMo)})`);
      push('Effective Gross Income (EGI)', fmtCur(results.egiMo), {total:true});

      // OpEx
      push('Operating Expenses (monthly)','',{section:true});
      push('Management', fmtCur(results.mgmtMo));
      push('Maintenance', fmtCur(results.baseMaintMo));
      push('Taxes', fmtCur(results.taxMo));
      push('Insurance', fmtCur(results.insMo));
      push('HOA', fmtCur(results.baseHoaMo));
      push('Utilities', fmtCur(results.baseUtilMo));
      push('Other Expenses', fmtCur(results.baseOtherExpMo));
      if(results.customExpMo>0) push('Custom Expenses (Monthly total)', fmtCur(results.customExpMo));
      push('Total Operating Expenses (OpEx)', fmtCur(results.opExMo), {total:true});

      // Financing & Performance
      push('Financing','',{section:true});
      push('Mortgage (P&I)', fmtCur(results.pmt), {total:true});

      push('Performance','',{section:true});
      push('Net Operating Income (NOI)', fmtCur(results.noiMo), {total:true});
      push('Cash Flow (Before Taxes)', fmtCur(results.cfMo), {total:true});

      push('Investment & Returns','',{section:true});
      push('Initial Cash Invested', fmtCur(results.initialCash), {total:true});
      push('Cash-on-Cash (%)', results.coc==null?'—':fmtPct(results.coc), {total:true});

      $('financeTableBody').innerHTML = rows.join('');

      $('resFutureValue').textContent = fmtCur(results.fv);
      $('resTotalReturnPct').textContent = results.totalReturnPct==null ? '—' : fmtPct(results.totalReturnPct);

      renderProjectionTable(results);
    }

    function renderProjectionTable(results){
      const rows = buildProjection(results);
      const head = ['<tr><th>Line Item</th>'];
      rows.forEach(r=> head.push(`<th>Year ${r.year}</th>`));
      head.push('</tr>');
      $('projectionTableHead').innerHTML = head.join('');

      function line(label, vals, neg=false){ return `<tr><td>${label}</td>${vals.map(v=>`<td>${neg? '('+fmtCur(v)+')' : fmtCur(v)}</td>`).join('')}</tr>`; }

      const gross = rows.map(r=>r.grossYr);
      const vac   = rows.map(r=>r.vacYr);
      const egi   = rows.map(r=>r.egiYr);
      const opex  = rows.map(r=>r.opExYr);
      const noi   = rows.map(r=>r.noiYr);
      const debt  = rows.map(r=>r.debtYr);
      const cf    = rows.map(r=>r.cfYr);
      const val   = rows.map(r=>r.value);

      const body = [];
      body.push(line('Gross Yearly Income', gross));
      body.push(line('Vacancy Loss', vac, true));
      body.push(line('Effective Gross Income', egi));
      body.push(line('Operating Expenses', opex, true));
      body.push(line('Net Operating Income (NOI)', noi));
      body.push(line('Debt Service (P&I)', debt, true));
      body.push(line('Net Cash Flow (Before Taxes)', cf));
      body.push(line('Property Value (End of Year)', val));

      $('projectionTableBody').innerHTML = body.join('');
    }

    // ---------- Projections Save/Load ----------
    function loadProjections(){ try{ const raw=localStorage.getItem(LS_PROJ_KEY); return raw? JSON.parse(raw):[]; }catch{ return []; } }
    function saveProjections(list){ try{ localStorage.setItem(LS_PROJ_KEY, JSON.stringify(list)); }catch{} }
    function refreshProjectionSelect(){ const list=loadProjections(); const sel=$('loadProjectionSelect'); const cur=sel.value; sel.innerHTML='<option value="">Load projection…</option>'+list.map(p=>`<option value="${encodeURIComponent(p.name)}">${p.name}</option>`).join(''); if(cur) sel.value=cur; }
    function onSaveProjection(){ const name=prompt('Name this projection:'); if(!name) return; const list=loadProjections(); const payload={ name, createdAt:new Date().toISOString(), inputs:getInputsSnapshot(), incomeItems, expenseItems }; const idx=list.findIndex(p=>p.name.toLowerCase()===name.toLowerCase()); if(idx>=0) list[idx]=payload; else list.push(payload); saveProjections(list); refreshProjectionSelect(); $('loadProjectionSelect').value=encodeURIComponent(name); setInfo(`Saved projection "${name}"`); }
    function onLoadProjection(){ const sel=$('loadProjectionSelect'); if(!sel.value){ setInfo('Select a projection to load.'); return; } const name=decodeURIComponent(sel.value); const list=loadProjections(); const found=list.find(p=>p.name===name); if(!found){ setInfo('Projection not found.'); return; } applyInputs(found.inputs||{}); incomeItems = Array.isArray(found.incomeItems)? found.incomeItems : []; expenseItems = Array.isArray(found.expenseItems)? found.expenseItems : []; saveLines(); renderLines(); const results=compute(); render(results); setInfo(`Loaded projection "${name}"`); }
    function onDeleteProjection(){ const sel=$('loadProjectionSelect'); if(!sel.value){ setInfo('Select a projection to delete.'); return; } const name=decodeURIComponent(sel.value); const list=loadProjections().filter(p=>p.name!==name); saveProjections(list); refreshProjectionSelect(); sel.value=''; setInfo(`Deleted projection "${name}"`); }

    // ---------- Status Helpers ----------
    function setStatus(msg,isError=false){ $('statusBar').textContent=msg; $('statusBar').style.color=isError? '#ffb3c2' : 'var(--sub)'; }
    function setInfo(msg){ const el=document.getElementById('statusBar'); el.textContent=msg; el.style.color='var(--sub)'; }

    // ---------- Init ----------
    function seedPlaceholders(){ for(const id of inputIds){ if(!inputs[id].placeholder) inputs[id].placeholder=String(defaults[id]??0); } }

    function initialLoad(){
      seedPlaceholders();
      const restored = loadLastInputs();
      if(!restored){ for(const id of inputIds){ if(inputs[id].value==='') inputs[id].value=defaults[id]; } }
      loadLines(); renderLines(); refreshProjectionSelect();
      const results = compute(); render(results);
      setStatus('Ready');
    }

    function bindActions(){
      attachInputAutosave();
      $('calcBtn').addEventListener('click', ()=>{ const results=compute(); render(results); setStatus('Calculated'); });
      $('calcBtn2').addEventListener('click', ()=>{ const results=compute(); render(results); setStatus('Calculated'); });
      $('saveProjectionBtn').addEventListener('click', ()=>{ onSaveProjection(); });
      $('saveProjectionBtn2').addEventListener('click', ()=>{ onSaveProjection(); });
      $('loadProjectionSelect').addEventListener('change', onLoadProjection);
      $('deleteProjectionBtn').addEventListener('click', onDeleteProjection);
      $('addIncomeBtn').addEventListener('click', ()=>{ incomeItems.push({label:'New income', amount:0, period:'monthly', growthPct:0}); saveLines(); renderLines(); setStatus('Income line added'); });
      $('addExpenseBtn').addEventListener('click', ()=>{ expenseItems.push({label:'New expense', amount:0, period:'monthly', growthPct:0}); saveLines(); renderLines(); setStatus('Expense line added'); });
    }

    document.addEventListener('DOMContentLoaded', ()=>{ initialLoad(); bindActions(); });
  </script>
</body>
</html>





